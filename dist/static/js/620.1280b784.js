"use strict";(self["webpackChunkvue_ts_mall_demo"]=self["webpackChunkvue_ts_mall_demo"]||[]).push([[620],{516:function(e,a,t){t.d(a,{B$:function(){return o},J_:function(){return i},TQ:function(){return c},cC:function(){return r},vw:function(){return n}});var l=t(6341);function o(e){return(0,l.Z)({url:`/api/admin/project/list?pageNum=${e.pageNum}&pageSize=${e.pageSize}`,method:"GET"})}function n(e){return(0,l.Z)({url:"/api/admin/project",method:"POST",data:{...e,price:100*+e.price}})}function c(e){return(0,l.Z)({url:`/api/admin/project/${e}`,method:"DELETE"})}function r(e,a){return(0,l.Z)({url:`/api/admin/price/${e}/${a}`,method:"POST"})}function i(e,a){return(0,l.Z)({url:`/api/admin/project/${e}?name=${a}`,method:"PUT"})}},5620:function(e,a,t){t.r(a),t.d(a,{default:function(){return k}});var l=t(3396);const o={style:{width:"90%"}},n=(0,l.Uk)("添加场地"),c=(0,l.Uk)(" 删除场地 "),r=(0,l.Uk)(" 修改价格 "),i=(0,l.Uk)(" 修改名称 "),u={class:"dialog-footer"},d=(0,l.Uk)("取消"),p=(0,l.Uk)("添加");function m(e,a,t,m,s,f){const w=(0,l.up)("el-button"),g=(0,l.up)("el-form-item"),h=(0,l.up)("el-form"),y=(0,l.up)("el-table-column"),_=(0,l.up)("el-table"),k=(0,l.up)("el-pagination"),C=(0,l.up)("el-input"),W=(0,l.up)("el-dialog");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",o,[(0,l.Wm)(h,{inline:!0,class:"search-form"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,{type:"primary",onClick:a[0]||(a[0]=a=>e.addPlace())},{default:(0,l.w5)((()=>[n])),_:1})])),_:1})])),_:1}),(0,l.Wm)(_,{data:e.placeList,border:""},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{prop:"projectId",label:"场地ID"}),(0,l.Wm)(y,{prop:"name",label:"名称"}),(0,l.Wm)(y,{prop:"price",label:"价格/元"}),(0,l.Wm)(y,{prop:"role",label:"操作"},{default:(0,l.w5)((a=>[(0,l.Wm)(w,{link:"",type:"primary",size:"small",onClick:t=>e.DeletePlace(a.row)},{default:(0,l.w5)((()=>[c])),_:2},1032,["onClick"]),(0,l.Wm)(w,{link:"",type:"primary",size:"small",onClick:t=>e.EditPrice(a.row)},{default:(0,l.w5)((()=>[r])),_:2},1032,["onClick"]),(0,l.Wm)(w,{link:"",type:"primary",size:"small",onClick:t=>e.EditName(a.row)},{default:(0,l.w5)((()=>[i])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,l.Wm)(k,{class:"pagination",background:"",layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,onCurrentChange:e.currentChange},null,8,["total","page-size","onCurrentChange"])]),(0,l.Wm)(W,{modelValue:e.addShow,"onUpdate:modelValue":a[5]||(a[5]=a=>e.addShow=a),title:"添加场地"},{footer:(0,l.w5)((()=>[(0,l._)("span",u,[(0,l.Wm)(w,{onClick:a[4]||(a[4]=a=>e.addShow=!1)},{default:(0,l.w5)((()=>[d])),_:1}),(0,l.Wm)(w,{type:"primary",onClick:e.addPlaceCommit},{default:(0,l.w5)((()=>[p])),_:1},8,["onClick"])])])),default:(0,l.w5)((()=>[(0,l.Wm)(h,{model:e.addPlaceData},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{label:"场地ID:","label-width":"120px",prop:"id"},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{modelValue:e.addPlaceData.id,"onUpdate:modelValue":a[1]||(a[1]=a=>e.addPlaceData.id=a),autocomplete:"off",placeholder:"请输入场地ID"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(g,{label:"名称:","label-width":"120px",prop:"name"},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{modelValue:e.addPlaceData.name,"onUpdate:modelValue":a[2]||(a[2]=a=>e.addPlaceData.name=a),autocomplete:"off",placeholder:"请输入场地名称"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(g,{label:"价格(元/小时):","label-width":"120px",prop:"price"},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{modelValue:e.addPlaceData.price,"onUpdate:modelValue":a[3]||(a[3]=a=>e.addPlaceData.price=a),autocomplete:"off",placeholder:"请输入价格"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])],64)}var s=t(4870),f=t(516),w=t(2807),g=t(5499),h=(0,l.aZ)({setup(){const e=(0,s.iH)(!1),a=(0,s.qj)({createBy:"",projectId:"",name:"",price:""}),t=(0,s.qj)({placeList:[]}),o=(0,s.qj)({pageSize:8,total:0,pageNum:1}),n=async()=>{const e=await(0,f.B$)(o);t.placeList=e.item.project.map((e=>(e.price=(e.price/100).toFixed(2),e))),o.total=e.item.total};(0,l.bv)((()=>{n()}));const c=e=>{console.log(e),o.pageNum=e,n()},r=()=>{e.value=!0},i=e=>{var a=new Date(1e3*e),t=a.getFullYear(),l=a.getMonth()+1,o=a.getDate();return t+"-"+(l<10?"0"+l:l)+"-"+(o<10?"0"+o:o)+" "+a.toTimeString().substr(0,8)},u=async()=>{const t=100*+a.price;if(t<=0||t>1e5)return void w.z8.error("价格不合理");a.createBy||(a.createBy=JSON.parse(localStorage.getItem("user")).id);const l=await(0,f.vw)(a);l.success&&(n(),w.z8.success("添加成功"),e.value=!1)},d=e=>{g.T.confirm("是否删除该场地?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const a=await(0,f.TQ)(e.projectId);a.success&&(n(),(0,w.z8)({type:"success",message:"删除成功"}))})).catch((()=>{(0,w.z8)({type:"info",message:"删除取消"})}))},p=e=>{g.T.prompt("请输入价格/元","价格修改",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((async({value:a})=>{if(a){if(a=String(100*Number(a)),+a<=0||+a>1e5)return void w.z8.error("价格不合理");const t=await(0,f.cC)(e.projectId,a);t.success&&(n(),(0,w.z8)({type:"success",message:"修改成功"}))}})).catch((()=>{(0,w.z8)({type:"info",message:"修改取消"})}))},m=e=>{g.T.prompt("请输入场地名称","名称修改",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((async({value:a})=>{if(a){const t=await(0,f.J_)(e.projectId,a);t.success&&(n(),(0,w.z8)({type:"success",message:"修改成功"}))}})).catch((()=>{(0,w.z8)({type:"info",message:"修改取消"})}))};return{...(0,s.BK)(o),...(0,s.BK)(t),currentChange:c,getdate:i,addPlaceData:a,addShow:e,addPlace:r,addPlaceCommit:u,DeletePlace:d,EditPrice:p,EditName:m}}}),y=t(89);const _=(0,y.Z)(h,[["render",m],["__scopeId","data-v-5f94c569"]]);var k=_}}]);
//# sourceMappingURL=620.1280b784.js.map